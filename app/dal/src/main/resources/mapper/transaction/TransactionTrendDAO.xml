<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.mingsha.dal.transaction.dao.TransactionTrendDAO">

    <resultMap type="site.mingsha.dal.transaction.model.TransactionTrendDO" id="TransactionTrendDOResult">
        <result property="id"    column="id"    />
        <result property="coin"    column="coin"    />
        <result property="gear"    column="gear"    />
        <result property="date"    column="date"    />
        <result property="priceStart"    column="price_start"    />
        <result property="priceEnd"    column="price_end"    />
        <result property="priceHighest"    column="price_highest"    />
        <result property="priceLowest"    column="price_lowest"    />
        <result property="pricePoints"    column="price_points"    />
        <result property="direction"    column="direction"    />
        <result property="createTime"    column="create_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>

    <sql id="selectTransactionTrendVO">
        select id, coin, gear, date, price_start, price_end, price_highest, price_lowest, price_points, direction, create_time, remark from transaction_trend
    </sql>

    <select id="selectTransactionTrendList" parameterType="site.mingsha.dal.transaction.model.TransactionTrendDO" resultMap="TransactionTrendDOResult">
        <include refid="selectTransactionTrendVO"/>
        <where>
            <if test="coin != null  and coin != ''"> and coin = #{coin}</if>
            <if test="gear != null  and gear != ''"> and gear = #{gear}</if>
            <if test="params.beginDate != null and params.beginDate != '' and params.endDate != null and params.endDate != ''"> and date between #{params.beginDate} and #{params.endDate}</if>
            <if test="direction != null  and direction != ''"> and direction = #{direction}</if>
        </where>
        order by date desc
    </select>

    <select id="selectTransactionTrendById" parameterType="Long" resultMap="TransactionTrendDOResult">
        <include refid="selectTransactionTrendVO"/>
        where id = #{id}
    </select>

    <insert id="insertTransactionTrend" parameterType="site.mingsha.dal.transaction.model.TransactionTrendDO" useGeneratedKeys="true" keyProperty="id">
        insert into transaction_trend
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="coin != null and coin != ''">coin,</if>
            <if test="gear != null and gear != ''">gear,</if>
            <if test="date != null">date,</if>
            <if test="priceStart != null and priceStart != ''">price_start,</if>
            <if test="priceEnd != null and priceEnd != ''">price_end,</if>
            <if test="priceHighest != null and priceHighest != ''">price_highest,</if>
            <if test="priceLowest != null and priceLowest != ''">price_lowest,</if>
            <if test="pricePoints != null and pricePoints != ''">price_points,</if>
            <if test="direction != null and direction != ''">direction,</if>
            <if test="createTime != null">create_time,</if>
            <if test="remark != null">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="coin != null and coin != ''">#{coin},</if>
            <if test="gear != null and gear != ''">#{gear},</if>
            <if test="date != null">#{date},</if>
            <if test="priceStart != null and priceStart != ''">#{priceStart},</if>
            <if test="priceEnd != null and priceEnd != ''">#{priceEnd},</if>
            <if test="priceHighest != null and priceHighest != ''">#{priceHighest},</if>
            <if test="priceLowest != null and priceLowest != ''">#{priceLowest},</if>
            <if test="pricePoints != null and pricePoints != ''">#{pricePoints},</if>
            <if test="direction != null and direction != ''">#{direction},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="remark != null">#{remark},</if>
         </trim>
    </insert>

    <update id="updateTransactionTrend" parameterType="site.mingsha.dal.transaction.model.TransactionTrendDO">
        update transaction_trend
        <trim prefix="SET" suffixOverrides=",">
            <if test="coin != null and coin != ''">coin = #{coin},</if>
            <if test="gear != null and gear != ''">gear = #{gear},</if>
            <if test="date != null">date = #{date},</if>
            <if test="priceStart != null and priceStart != ''">price_start = #{priceStart},</if>
            <if test="priceEnd != null and priceEnd != ''">price_end = #{priceEnd},</if>
            <if test="priceHighest != null and priceHighest != ''">price_highest = #{priceHighest},</if>
            <if test="priceLowest != null and priceLowest != ''">price_lowest = #{priceLowest},</if>
            <if test="pricePoints != null and pricePoints != ''">price_points = #{pricePoints},</if>
            <if test="direction != null and direction != ''">direction = #{direction},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="remark != null">remark = #{remark},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteTransactionTrendById" parameterType="Long">
        delete from transaction_trend where id = #{id}
    </delete>

    <delete id="deleteTransactionTrendByIds" parameterType="String">
        delete from transaction_trend where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>
