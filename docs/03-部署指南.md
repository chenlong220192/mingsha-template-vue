# ğŸ“¦ éƒ¨ç½²æŒ‡å—

## æœ¬åœ°æ„å»º

### åç«¯æ„å»º

```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean compile

# è¿è¡Œæµ‹è¯•
mvn test

# æ‰“åŒ…åº”ç”¨
mvn clean package -DskipTests

# æ„å»ºåº”ç”¨åŒ…
make package ENV=dev

# æ„å»º Docker é•œåƒ
make docker.build ENV=prod

# éƒ¨ç½²åˆ° Kubernetes
make helm.upgrade ENV=prod
```

### å‰ç«¯æ„å»º

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd ui

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºå¼€å‘ç¯å¢ƒ
npm run build:dev

# æ„å»ºæµ‹è¯•ç¯å¢ƒ
npm run build:stage

# æ„å»ºç”Ÿäº§ç¯å¢ƒ
npm run build:prod
```

## Jenkins æ„å»º

```bash
# é€šè¿‡ Jenkins API è§¦å‘æ„å»º
curl -X POST "http://jenkins-url/job/mingsha-template-vue/buildWithParameters?BUILD_ENV=prod&SKIP_TESTS=false"
```

## Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t mingsha-template-vue:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name mingsha-template-vue \
  -p 8001:8001 \
  -e SPRING_PROFILES_ACTIVE=prod \
  mingsha-template-vue:latest
```

## Kubernetes éƒ¨ç½²

```bash
# ä½¿ç”¨ Helm éƒ¨ç½²
helm install mingsha-template-vue ./helm-chart \
  --namespace mingsha \
  --set environment=prod
```

## å‰ç«¯éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

```bash
cd ui
npm install
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
cd ui
npm install
npm run build:prod
```

### Docker éƒ¨ç½²å‰ç«¯

```bash
cd ui
docker build -t mingsha-ui:latest .
docker run -d -p 80:80 mingsha-ui:latest
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|--------|------|--------|------|
| `SPRING_PROFILES_ACTIVE` | Spring Boot ç¯å¢ƒ | `dev` | `prod` |
| `DB_HOST` | æ•°æ®åº“ä¸»æœº | `localhost` | `192.168.1.100` |
| `DB_PORT` | æ•°æ®åº“ç«¯å£ | `3306` | `3306` |
| `DB_NAME` | æ•°æ®åº“åç§° | `mingsha_template_vue` | `mingsha_prod` |
| `DB_USERNAME` | æ•°æ®åº“ç”¨æˆ·å | `root` | `mingsha_user` |
| `DB_PASSWORD` | æ•°æ®åº“å¯†ç  | - | `your_password` |
| `REDIS_HOST` | Redis ä¸»æœº | `localhost` | `192.168.1.101` |
| `REDIS_PORT` | Redis ç«¯å£ | `6379` | `6379` |
| `REDIS_PASSWORD` | Redis å¯†ç  | - | `redis_password` |
| `JWT_SECRET` | JWT å¯†é’¥ | - | `your_jwt_secret` |
| `SERVER_PORT` | æœåŠ¡ç«¯å£ | `8001` | `8001` |

### ç«¯å£é…ç½®

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| åç«¯æœåŠ¡ | 8001 | Spring Boot åº”ç”¨ |
| å‰ç«¯æœåŠ¡ | 8080 | Vue å¼€å‘æœåŠ¡å™¨ |
| å‰ç«¯ç”Ÿäº§ | 80 | Nginx æœåŠ¡ |

## ç›‘æ§å’Œæ—¥å¿—

### åº”ç”¨ç›‘æ§

- **å¥åº·æ£€æŸ¥**: http://localhost:8001/actuator/health
- **æŒ‡æ ‡ç›‘æ§**: http://localhost:8001/actuator/metrics
- **åº”ç”¨ä¿¡æ¯**: http://localhost:8001/actuator/info

### æ—¥å¿—é…ç½®

```yaml
# application.yml
logging:
  level:
    site.mingsha: INFO
    org.springframework: WARN
  file:
    name: logs/mingsha-template-vue.log
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
```

## æ€§èƒ½ä¼˜åŒ–

### JVM å‚æ•°

```bash
java -Xms512m -Xmx1024m -XX:+UseG1GC -jar mingsha-template-vue.jar
```

### æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_user_username ON sys_user(username);
CREATE INDEX idx_user_email ON sys_user(email);

-- ä¼˜åŒ–æŸ¥è¯¢
EXPLAIN SELECT * FROM sys_user WHERE username = 'admin';
```

### ç¼“å­˜é…ç½®

```yaml
# Redis ç¼“å­˜é…ç½®
spring:
  redis:
    host: localhost
    port: 6379
    database: 0
    timeout: 3000ms
    lettuce:
      pool:
        max-active: 8
        max-wait: -1ms
        max-idle: 8
        min-idle: 0
``` 