# ğŸ” é…ç½®åŠ å¯†

## æ•æ„Ÿé…ç½®åŠ å¯†

ä¸ºäº†ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç ã€APIå¯†é’¥ç­‰ï¼‰ï¼Œç³»ç»Ÿä½¿ç”¨ Jasypt è¿›è¡Œé…ç½®åŠ å¯†ã€‚

## åŠ å¯†å‘½ä»¤

```bash
# ä½¿ç”¨ Maven ä¾èµ–æ–¹å¼ï¼ˆæ¨èï¼‰
mvn jasypt:encrypt-value -Djasypt.encryptor.password="your_secret_password" -Djasypt.plugin.value="your_sensitive_data"

# æˆ–ä½¿ç”¨ JAR åŒ…æ–¹å¼
java -cp jasypt-spring-boot-starter-3.0.5.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI \
  input="your_sensitive_data" \
  password="your_secret_password" \
  algorithm=PBEWithMD5AndDES
```

## è§£å¯†å‘½ä»¤

```bash
# ä½¿ç”¨ Maven ä¾èµ–æ–¹å¼ï¼ˆæ¨èï¼‰
mvn jasypt:decrypt-value -Djasypt.encryptor.password="your_secret_password" -Djasypt.plugin.value="encrypted_value"

# æˆ–ä½¿ç”¨ JAR åŒ…æ–¹å¼
java -cp jasypt-spring-boot-starter-3.0.5.jar org.jasypt.intf.cli.JasyptPBEStringDecryptionCLI \
  input="encrypted_value" \
  password="your_secret_password" \
  algorithm=PBEWithMD5AndDES
```

## ä½¿ç”¨ç¤ºä¾‹

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

```yaml
# application.yml
spring:
  datasource:
    password: ENC(encrypted_password_here)
    url: ENC(encrypted_url_here)
  
  redis:
    password: ENC(encrypted_redis_password)
  
# å…¶ä»–æ•æ„Ÿé…ç½®
app:
  jwt:
    secret: ENC(encrypted_jwt_secret)
  api:
    key: ENC(encrypted_api_key)
```

### å¯åŠ¨æ—¶æŒ‡å®šåŠ å¯†å¯†ç 

```bash
# æ–¹å¼1ï¼šå‘½ä»¤è¡Œå‚æ•°
java -jar app.jar --jasypt.encryptor.password=your_secret_password

# æ–¹å¼2ï¼šç¯å¢ƒå˜é‡
export JASYPT_ENCRYPTOR_PASSWORD=your_secret_password
java -jar app.jar

# æ–¹å¼3ï¼šç³»ç»Ÿå±æ€§
java -Djasypt.encryptor.password=your_secret_password -jar app.jar
```

## é…ç½®è¯´æ˜

### Jasypt é…ç½®

```yaml
# application-jasypt.yml
jasypt:
  encryptor:
    password: ${JASYPT_ENCRYPTOR_PASSWORD:default_password}
    algorithm: PBEWithMD5AndDES
    iv-generator-classname: org.jasypt.iv.NoIvGenerator
    string-output-type: base64
```

### åŠ å¯†ç®—æ³•

| ç®—æ³• | è¯´æ˜ | å®‰å…¨æ€§ | æ¨èåº¦ |
|------|------|--------|--------|
| `PBEWithMD5AndDES` | é»˜è®¤ç®—æ³• | ä¸­ç­‰ | â­â­â­ |
| `PBEWithSHA1AndDESede` | SHA1 + 3DES | é«˜ | â­â­â­â­ |
| `PBEWithSHA256AndAES_256` | SHA256 + AES256 | æœ€é«˜ | â­â­â­â­â­ |
| `PBEWITHHMACSHA512ANDAES_256` | HMAC-SHA512 + AES256 | æœ€é«˜ | â­â­â­â­â­ |

### å®‰å…¨å»ºè®®

1. **å¯†ç å¼ºåº¦**
   - ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘16ä½ï¼‰
   - åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
   - å®šæœŸæ›´æ¢å¯†ç 

2. **å¯†ç ç®¡ç†**
   - ä¸è¦å°†å¯†ç ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¤–éƒ¨é…ç½®
   - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡

3. **åŠ å¯†èŒƒå›´**
   - æ•°æ®åº“è¿æ¥ä¿¡æ¯
   - APIå¯†é’¥å’Œä»¤ç‰Œ
   - ç¬¬ä¸‰æ–¹æœåŠ¡å‡­æ®
   - æ•æ„Ÿä¸šåŠ¡é…ç½®

## å¸¸è§é—®é¢˜

### Q: åŠ å¯†åæ— æ³•å¯åŠ¨åº”ç”¨ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹é…ç½®ï¼š
1. åŠ å¯†å¯†ç æ˜¯å¦æ­£ç¡®
2. åŠ å¯†ç®—æ³•æ˜¯å¦åŒ¹é…
3. åŠ å¯†å€¼æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆéœ€è¦ ENC() åŒ…è£…ï¼‰

### Q: å¦‚ä½•æ‰¹é‡åŠ å¯†é…ç½®ï¼Ÿ

**A**: å¯ä»¥ä½¿ç”¨è„šæœ¬æ‰¹é‡å¤„ç†ï¼š

```bash
#!/bin/bash
# encrypt-config.sh

PASSWORD="your_secret_password"
ALGORITHM="PBEWithMD5AndDES"

# åŠ å¯†æ•°æ®åº“å¯†ç 
DB_PASSWORD="your_db_password"
ENCRYPTED_DB_PASSWORD=$(java -cp jasypt-1.9.3.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI \
  input="$DB_PASSWORD" \
  password="$PASSWORD" \
  algorithm="$ALGORITHM" | grep "OUTPUT" | cut -d' ' -f3)

echo "æ•°æ®åº“å¯†ç åŠ å¯†ç»“æœ: ENC($ENCRYPTED_DB_PASSWORD)"
```

### Q: å¦‚ä½•éªŒè¯åŠ å¯†é…ç½®ï¼Ÿ

**A**: å¯ä»¥ä½¿ç”¨æµ‹è¯•é…ç½®éªŒè¯ï¼š

```yaml
# application-test.yml
spring:
  datasource:
    password: ENC(test_encrypted_password)
    url: ENC(test_encrypted_url)

# å¯åŠ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
java -jar app.jar --spring.profiles.active=test --jasypt.encryptor.password=test_password
```

## æœ€ä½³å®è·µ

1. **å¼€å‘ç¯å¢ƒ**
   - ä½¿ç”¨ç®€å•çš„æµ‹è¯•å¯†ç 
   - é…ç½®ç¤ºä¾‹æ–‡ä»¶
   - æ–‡æ¡£è¯´æ˜åŠ å¯†æµç¨‹

2. **æµ‹è¯•ç¯å¢ƒ**
   - ä½¿ç”¨ä¸­ç­‰å¼ºåº¦å¯†ç 
   - å®šæœŸæ›´æ¢å¯†ç 
   - ç›‘æ§é…ç½®è®¿é—®

3. **ç”Ÿäº§ç¯å¢ƒ**
   - ä½¿ç”¨é«˜å¼ºåº¦å¯†ç 
   - é€šè¿‡å¯†é’¥ç®¡ç†æœåŠ¡ç®¡ç†
   - å®¡è®¡é…ç½®å˜æ›´
   - å®šæœŸè½®æ¢å¯†ç  